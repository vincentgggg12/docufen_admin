{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Test Configuration Schema",
  "description": "Schema for individual test configuration files",
  "type": "object",
  "properties": {
    "sectionId": {
      "type": "string",
      "pattern": "^\\d+(\\.\\d+)?$",
      "description": "Section identifier (e.g., '6.1')"
    },
    "sectionName": {
      "type": "string",
      "description": "Human-readable section name"
    },
    "tests": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/test"
      }
    }
  },
  "required": ["sectionId", "sectionName", "tests"],
  "definitions": {
    "test": {
      "type": "object",
      "properties": {
        "testId": {
          "type": "string",
          "pattern": "^TS\\.\\d+\\.\\d+-\\d{2}$",
          "description": "Test identifier (e.g., 'TS.6.1-01')"
        },
        "testName": {
          "type": "string",
          "description": "Short test name"
        },
        "description": {
          "type": "string",
          "description": "Detailed test description"
        },
        "prerequisites": {
          "type": "object",
          "properties": {
            "role": {
              "type": "string",
              "enum": ["User Manager", "Document Manager", "Administrator", "Viewer"]
            },
            "state": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "steps": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/step"
          }
        }
      },
      "required": ["testId", "testName", "steps"]
    },
    "step": {
      "type": "object",
      "properties": {
        "stepNumber": {
          "type": "string",
          "pattern": "^\\d{2}$",
          "description": "Step number (e.g., '01', '02')"
        },
        "procedure": {
          "type": "string",
          "description": "Step procedure description"
        },
        "expectedResult": {
          "type": "string",
          "description": "Expected result for this step"
        },
        "requiresScreenshot": {
          "type": "boolean",
          "default": false,
          "description": "Whether this step requires a screenshot"
        },
        "extractionPatterns": {
          "type": "array",
          "items": {
                "type": "string"
          },
          "description": "Patterns to match this step in test output"
        }
      },
      "required": ["stepNumber", "procedure", "expectedResult"]
    }
  }
}